- content_for :head do
  %meta{ property: "og:title", content: "<%=@user.first_name%> <%=@user.last_name%>" }
  %meta{ property: "og:type", content: "website" } 
  %meta{ property: "og:url", content: "<%=user_url(@user)%>" } 
  %meta{ property: "og:image", content:"<%=user_image%>" }
  %meta{ property: "og:description", content: "<%=user_description%>" }

.hero-image{style: "background-image: url(#{@user.cover_photo.url(:large)});"}
  .hero
    = render 'shared/nav'
    .container.p-y-100.text-center{style: "height: 300px;"}
.container.text-center{style: "height: 80px;"}
  .row
    %span{style: "position: relative; top: -75px;"}
      = image_tag(@user.avatar.url(:small), style: "border: 1px solid white; background-color: white; padding: 5px;")
.container.text-center.p-y-20
  .row
    .col-xs-12
      %h1= @user.first_name + " " + @user.last_name
  .row
    .col-xs-12
      %p.quote= @user.description
  .row.m-top-20
    .col-xs-12
      %h4= @user.location
      %ul.list-inline
        - @user.interests.each do |interest|
          %li
            %h5
              = link_to(interest.name, "/interests/#{interest.id}/about")
.container
  .row.text-center
    .col-xs-12
      %ul.list-inline
        %li.active
          %a{href: "#work", role: "tab", "data-toggle" => "tab"} Reels
        %li.divider
        %li
          %a{href: "#bio", role: "tab", "data-toggle" => "tab"} Bio
.container.text-center.m-y-50{style: "height: 1px; background-color: #cccccc;"}
  %span{style: "background-color: white; position: relative; top: -30px;"}
    - if current_user.present?
      - if @user.id == current_user.id
        %button.btn.btn-default.btn-large= link_to "Edit Profile", edit_profile_path
    - else
      %button.btn.btn-primary.btn-large Follow
.tab-content.m-bottom-60
  .container.tab-pane#bio{role: "tabpanel"}
    .row.text-center
      .col-xs-12.col-sm-8.col-sm-offset-2
        %p= @user.bio
  .container.tab-pane.active#work{role: "tabpanel"}
    .container.p-y-10{role: "tabpanel"}
      .row.text-right
        .col-xs-12
          %ul.list-inline
            %li.active
              %a{href: "#reels", role: "tab", "data-toggle" => "tab"} Reels
            %li
              %a{href: "#timeline", role: "tab", "data-toggle" => "tab"} Timeline
    .tab-content
      -# APRIL: Need to hook up user content here
      .container.tab-pane#timeline{role: "tabpanel"}
        .row
          - @reels.each do |reel|
            - reel.images.each do |image|
              .col-xs-12.col-sm-4
                %h4
                  -# APRIL: Make reel dates and names dynamic
                  %strong= image.updated_at
                  -#%span= "by" + " " + @user.first_name + @user.last_name
                %h4= link_to(image.reel.name, "/reels/#{reel.id}")
                %img.m-top-10= image_tag(image.photo.url, width: "100%")
                %h5.text-center.m-top-10= image.description
      .container.tab-pane.active#reels{role: "tabpanel"}
        - @reels.each do |reel|
          .row.p-top-20
            .col-xs-12
              -# APRIL: Hook up to reel names and tags
              %h3= link_to(reel.name, "/reels/#{reel.id}")
              - interest = reel.interests
              - length = interest.length
              - media = (reel.images + reel.videos).sort{|a,b| b.updated_at <=> a.updated_at }
              %ul.list-inline
                - interest.each_with_index do |interest, x|
                  - if x+1 != length
                    %li
                      = link_to(interest.name, "/interests/#{interest.id}/about")
                    %li.divider
                  - else
                    %li
                      = link_to(interest.name, "/interests/#{interest.id}/about")
          .row.p-top-20.text-center
            .col-xs-12
              %div.reel-carousel
                -# APRIL: Hook up reel images and titles to carousel
                - reel.reel_media(reel.id).each do |media|
                  - if media.class.name == "Image"
                    %div.m-20
                      %a
                        = image_tag(media.photo.url, width: "100%")
                        %h4.p-top-15= media.description
                  - elsif media.class.name == "Video"
                    %div.m-20
                      %a
                        / <iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/<%=media.uid%>" allowfullscreen frameborder="0">
                        / </iframe>
                        %iframe.youtube-player{type: "text/html", width: "450", height: "296", src: "http://www.youtube.com/embed/#{media.uid}", "allowfullscreen" => "true", "frameborder" => "0", "rel" => "0"}
                        %h4.p-top-15= media.description



-# <!--Statbar (Avatar and Stats) -->
  <%= render "user_avatarbar" %>

  <!-- Menubar -->
  <%= render "user_menubar" %>

  <div id="fb-root" data-fb-app-id="<%= ENV['FACEBOOK_APP_ID']%>"</div>
  <div class="fb-share-button" data-href="<%=share_object('user')%>" data-width="300" data-layout="link"></div>

  <!-- Reels -->
  <% if @user == current_user && !@user.reels.present? %>
    <%= render "user_reels_empty" %>
  <% else %>
    <% @reels.each do |reel| %>
    <div class="row">
      <div class="col-xs-12">
        <div class="row">
          <h2> <%= link_to reel.name, reel %> </h2>
        <div>
        <div class="row">
        <% reel.interests.each do |interest| %>
          <%= link_to interest.name, interest_path(interest) %>
        <% end %>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <% reel.images.each do |image| %>
            <div class="row">
              <h3> <%= image.title %> </h3>
            </div>
            <div class="row">
              <% if image.photo %>
                <%= image_tag image.photo.url(:medium) %>
              <% end %>
            </div>
            <% end %>
          </div>
        </div>

        <div class="row" id="videos-list" style:"list-style: none;">
          <% reel.videos.each do |video| %>
            <div class="row">
              <h2> <%= video.title %> </h2>
              <p> <%= video.description %> </p>
            </div>
            <div class="row">
              <iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/<%=video.uid%>" allowfullscreen frameborder="0">
              </iframe>
            </div>
          <% end %>
        </div>

      </div>
    </div>

      <br><br>
    <% end %>
  <% end %>

  <!-- Projects -->

  <%# if @user == current_user && !@user.projects.present? %>
    <%#= render "user_projects_empty" %>
  <%# else %>
    <%#= render "shared/projects" %>
  <%# end %>
